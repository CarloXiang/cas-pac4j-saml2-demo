<beans:beans xmlns="http://www.springframework.org/schema/security"
	xmlns:beans="http://www.springframework.org/schema/beans" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:security="http://www.springframework.org/schema/security"
	xsi:schemaLocation="http://www.springframework.org/schema/beans 
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                    http://www.springframework.org/schema/security 
                    http://www.springframework.org/schema/security/spring-security-3.1.xsd">




<beans:bean id="serviceProperties"  class="org.springframework.security.cas.ServiceProperties">
    <beans:property name="service"
        value="https://cas.alessandro.it:2443/caspac/login"/>
    <beans:property name="sendRenew" value="false"/>
 </beans:bean>
  
 <!-- The following beans should be configured to commence the CAS authentication process -->
<beans:bean id="casFilter" class="org.springframework.security.cas.web.CasAuthenticationFilter">
  <beans:property name="authenticationManager" ref="authenticationmanagercas"/>
</beans:bean>

<beans:bean id="casEntryPoint" class="org.springframework.security.cas.web.CasAuthenticationEntryPoint">
  <beans:property name="loginUrl" value="https://cas.alessandro.it:6443/cas-server/login"/>
  <beans:property name="serviceProperties" ref="serviceProperties"/>
</beans:bean>
  
<security:authentication-manager id="authenticationmanagercas" alias="authenticationmanagercas">
 <security:authentication-provider ref="casAuthenticationProvider">
  </security:authentication-provider>
</security:authentication-manager>
 
 
   <beans:bean id="casAuthenticationProvider"
      class="org.springframework.security.cas.authentication.CasAuthenticationProvider">
    <beans:property name="userDetailsService" ref="userService"/><!-- rimuovi ...  -->
    <beans:property name="serviceProperties" ref="serviceProperties" />
    <beans:property name="ticketValidator">
      <beans:bean class="org.jasig.cas.client.validation.Cas20ServiceTicketValidator">
        <beans:constructor-arg index="0" value="https://cas.alessandro.it:6443/cas-server" />
        </beans:bean>
    </beans:property>
    <beans:property name="key" value="cas-sec-app-pac-24574679362567365"/>
    <!--
    <beans:property name="authenticationUserDetailsService" ref="authenticationUserDetailsService"/>-->  <!-- MODIFICATA -->
    
  </beans:bean>
 
 <!-- rimuovi ...  -->
 	<security:user-service id="userService"> 
		<security:user name="ale"  authorities="S" /> 
		<security:user name="aleldap"  authorities="S,ldapuser" /> 
		<security:user name="alecas"  authorities="S,casuser" /> 
	</security:user-service> 


   <beans:bean id="singleLogoutFilter" class="org.jasig.cas.client.session.SingleSignOutFilter"/>
   
  <!-- This filter redirects to the CAS Server to signal Single Logout should be performed -->
  <beans:bean id="requestSingleLogoutFilter" class="org.springframework.security.web.authentication.logout.LogoutFilter">
   
    <beans:constructor-arg value="https://cas.alessandro.it:6443/cas-server/logout"/>
    <beans:constructor-arg>
      <beans:bean class=
          "org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler"/>
    </beans:constructor-arg>
    <beans:property name="filterProcessesUrl" value="/logout"/>
  </beans:bean>
 
 
 



</beans:beans>